(()=>{"use strict";const e=function e(t,n){var r=t.target;(r.classList.contains("overlay")||r.closest(".close-form")||r.classList.contains("close-btn"))&&(n.style.display="none",n.removeEventListener("click",e))};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const n=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a="Что-то пошло не так...",i="Спасибо! Данные отправлены!",c=document.createElement("div");c.className="send-status";var s=document.createElement("div");s.className="send-status",s.innerHTML='<div class="sk-wave sk-center">\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                </div>',o&&o.addEventListener("click",(function(t){return e(t,o)}));var u=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:e})},d=function(e){e.querySelectorAll('input[name="name"]').forEach((function(e){return e.value=""})),e.querySelectorAll('input[name="phone"]').forEach((function(e){return e.value=""})),e.querySelectorAll('input[type="checkbox"]').forEach((function(e){e.closest(".personal-data")&&(e.checked=!1)})),l&&l()},f=function(e){var t=e.querySelector('input[name = "phone"]'),n=e.querySelector('input[name = "name"]'),r=e.querySelector('input[type = "checkbox"]'),o=t.value.replace(/\D/g,"").length;if("footer_form"===e.id){var l=0;if(e.querySelectorAll('input[type="radio"]').forEach((function(e){return e.checked?l++:""})),0===l)return"Вы не выбрали клуб!"}return n&&n.value.split(" ")[0].length<2?(n.focus(),"В имени не может быть менее одного символа! "):r&&!r.checked?"Не получено согласие на обработку персональных данных!":o<11?(t.focus(),"Телефонный номер не может быть короче 11 цифр!"):"OK"};t.querySelectorAll('input[type = "checkbox"]').forEach((function(e){e.closest(".personal-data")&&e.removeAttribute("required")})),t.addEventListener("submit",(function(e){e.preventDefault();var l=f(t);if("OK"!==l)return c.textContent=l,t.appendChild(c),void setTimeout((function(){c.textContent="",document.querySelector(".send-status")&&t.removeChild(c)}),2e3);var m=new FormData(t);r&&(n=t.innerHTML),t.appendChild(s);var v={};m.forEach((function(e,t){v[t]=e})),u(JSON.stringify(v)).then((function(e){if(t.removeChild(s),200!==e.status)throw new Error("response status not 200");c.textContent=i,r?(t.innerHTML="",t.appendChild(c)):o.style.display="block"})).catch((function(e){console.error(e),r?(c.textContent=a,t.innerHTML="",t.appendChild(c)):(o.querySelector(".form-content").innerHTML="\n                    <h4>Ошибка !</h4>\n                <p>Ваша заявка не была отправлена.</p>\n                       ",o.style.display="block")})).finally((function(){setTimeout((function(){r&&(c.textContent="",t.innerHTML=n),d(t)}),3e3),r&&setTimeout((function(){t.closest(".popup").style.display="none"}),2500)}))}))};function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(){var e,t={schelkovo:{1:2990,6:14990,9:21990,12:24990},mozaika:{1:1999,6:9900,9:13900,12:19900}},n=document.querySelectorAll('#card_order input[name="club-name"]'),r=document.querySelectorAll("#card_order .time input"),o=document.getElementById("price-total"),l="ТЕЛО2020"===document.querySelector('.price-message input[name="name"]').value.trim().toUpperCase()?.7:1;n.forEach((function(t){t.checked&&(e=t.value)}));for(var a=0;a<r.length;a++)r[a].checked&&(o.textContent=Math.floor(t[e][r[a].value]*l))};var a,i,c,s,u,d,f,m,v,p,y,h,g,E,b,L,S;S=[{elem:".club-select",fun:function(e){var t=e.closest(".club-select").querySelector(".clubs-list ul");"block"===t.style.display?t.style.display="none":t.style.display="block"}},{elem:".open-popup",fun:function(){var e=document.getElementById("free_visit_form");e.style.display="block",e.addEventListener("click",(function t(n){var r=n.target;(r.classList.contains("overlay")||r.closest(".close-form"))&&(e.style.display="none",e.removeEventListener("click",t))}))}},{elem:".callback-btn",fun:function(e){if(e.closest(".head-main")){var t=document.getElementById("callback_form");t.style.display="block",t.addEventListener("click",(function e(n){var r=n.target;(r.classList.contains("overlay")||r.closest(".close-form"))&&(t.style.display="none",t.removeEventListener("click",e))}))}}},{elem:".fixed-gift",fun:function(t){t.style.display="none";var n=document.getElementById("gift");n.style.display="block",n.addEventListener("click",(function(t){return e(t,n)}))}},{elem:".menu-button.hidden-large",fun:function(e){var t=document.querySelector(".popup-menu");t.setAttribute("style","display: flex;"),t.addEventListener("click",(function e(n){var r=n.target;(r.closest(".scroll")||r.closest(".close-menu-btn"))&&(t.setAttribute("style","display: none;"),t.removeEventListener("click",e))}))}}],document.querySelector("body").addEventListener("click",(function(e){!function(e){for(var t=e.target,n=0;n<S.length;n++)if(null!==t.closest(S[n].elem)){S[n].fun(t);break}}(e)})),h=0,document.querySelector(".head-slider"),g=document.querySelector(".main-slider"),E=g.querySelectorAll(".main-slider .slide"),b=function(){var e;E[h].style.display="none",e=h=++h>=E.length?0:h,E[e].style.display="flex"},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;y=setInterval(b,e)},g.addEventListener("mouseover",(function(){return clearInterval(y)})),g.addEventListener("mouseout",(function(){return L()})),L(2e3),function(){var e=document.querySelector(".services-slider"),n=e.innerHTML;e.innerHTML="";var r=document.createElement("div");r.className="service-slide__wrapper",r.innerHTML=n,e.insertAdjacentElement("afterbegin",r);var o,l,a=0,i=r.querySelectorAll(".slide"),c=Math.floor(10);!function(){e.classList.add("glo-slider"),r.classList.add("glo-slider__wrap");var n,o=function(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,l=function(){};return{s:l,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(i);try{for(o.s();!(n=o.n()).done;)n.value.classList.add("glo-slider__item")}catch(e){o.e(e)}finally{o.f()}}(),l=document.createElement("div"),o=document.createElement("div"),l.className="slider-arrow prev",o.className="slider-arrow next",l.innerHTML='<span><img src="./images/arrow-left.png" alt=""></span> ',o.innerHTML='<span><img src="./images/arrow-right.png" alt=""></span> ',e.insertAdjacentElement("beforeend",l),e.insertAdjacentElement("beforeend",o),l.addEventListener("click",(function(){return function(){if(a>=0){if(-1==--a){++a,r.style.transition="transform 0s",r.style.transform="translateX(-".concat((a+1)*c,"%)");var e=i[i.length-1].cloneNode(!0);r.insertAdjacentElement("afterbegin",e),i[i.length-1].remove(),i=r.querySelectorAll(".slide"),setTimeout((function(){r.style.transition="transform 0.5s"}),75)}setTimeout((function(){r.style.transform="translateX(-".concat(a*c,"%)")}),75)}}()})),o.addEventListener("click",(function(){return function(){if(a<i.length-5){if(++a==i.length-5){--a,r.style.transition="transform 0s",r.style.transform="translateX(-".concat((a-1)*c,"%)");var e=i[0].cloneNode(!0);r.insertAdjacentElement("beforeend",e),i[0].remove(),i=r.querySelectorAll(".slide"),setTimeout((function(){r.style.transition="transform 0.5s"}),75)}setTimeout((function(){r.style.transform="translateX(-".concat(a*c,"%)")}),75)}}()}))}(),function(){document.querySelectorAll('input[name="name"]').forEach((function(e){return e.setAttribute("maxlength","28")})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__",n=document.querySelectorAll(e);function o(e){var n=e.keyCode,r=t,o=r.replace(/\D/g,""),l=this.value.replace(/\D/g,""),a=0,i=r.replace(/[_\d]/g,(function(e){return a<l.length?l.charAt(a++)||o.charAt(a):e}));-1!==(a=i.indexOf("_"))&&(i=i.slice(0,a));var c=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(c=new RegExp("^"+c+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=i),"blur"===e.type&&this.value.length<5&&(this.value="")}var l,a=r(n);try{for(a.s();!(l=a.n()).done;){var i=l.value;i.addEventListener("input",o),i.addEventListener("focus",o),i.addEventListener("blur",o)}}catch(e){a.e(e)}finally{a.f()}}('input[name="phone"]'),document.querySelectorAll('input[name="name"]').forEach((function(e){var t;e.closest(".price-message")?function(e){e.addEventListener("input",(function(){return e.value=e.value.replace(/[^а-яёА-ЯЁ\d ]/gi,"")}))}(e):(t=e).addEventListener("input",(function(){return t.value=t.value.replace(/[^а-яёА-ЯЁ ]/gi,"")}))}));document.querySelectorAll('input[name="name"]').forEach((function(e){return e.addEventListener("blur",(function(){e.value=e.value.replace(/^[ -]*/,""),e.value=e.value.replace(/[ -]*$/,""),e.value=e.value.replace(/ +/g," "),e.value=e.value.replace(/-+/g,"-"),"name"===e.name&&(e.closest(".price-message")?e.value=e.value.toUpperCase():e.value=e.value.replace(/[а-яА-Я]+/g,(function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})))}))}))}(),function(){var e,t,n=document.querySelectorAll(".gallery-slider .slide"),r=document.querySelector(".gallery-slider");e=document.createElement("div"),t=document.createElement("div"),e.className="slider-arrow prev",t.className="slider-arrow next",e.id="arrow-left",t.id="arrow-right",e.innerHTML='<span><img src="./images/arrow-left.png" alt=""></span>',t.innerHTML='<span><img src="./images/arrow-right.png" alt=""></span>',r.insertAdjacentElement("beforeend",e),r.insertAdjacentElement("beforeend",t);var o,l,a=0,i=function(e,t,n){e[t].classList.remove("super"),e[t].classList.remove(n)},c=function(e,t,n){e[t].classList.add(n),setTimeout((function(){e[t].classList.add("super")}),100)};c(n,a,"active");var s,u=function(){i(n,a,"active"),i(l,a,"slick-active"),++a>=n.length&&(a=0),c(n,a,"active"),c(l,a,"slick-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;o=setInterval(u,e)};(s=document.createElement("ul")).className="slider-dots",r.insertAdjacentElement("beforeend",s),n.forEach((function(e){var t=document.createElement("li");t.className="dot",t.innerHTML="<button></button>",e.classList.contains("active")&&t.classList.add("slick-active"),s.insertAdjacentElement("beforeend",t)})),l=document.querySelectorAll(".dot"),r.addEventListener("click",(function(e){e.preventDefault();var t=e.target;(t.closest(".slider-arrow")||t.closest(".dot"))&&(i(n,a,"active"),i(l,a,"slick-active"),t.closest("#arrow-right")?a++:t.closest("#arrow-left")?a--:t.closest(".dot")&&l.forEach((function(e,n){e===t.closest(".dot")&&(a=n)})),a>=n.length&&(a=0),a<0&&(a=n.length-1),c(n,a,"active"),c(l,a,"slick-active"))})),r.addEventListener("mouseover",(function(e){(e.target.closest(".slider-arrow")||e.target.closest(".dot"))&&clearInterval(o)})),r.addEventListener("mouseout",(function(e){(e.target.closest(".slider-arrow")||e.target.closest(".dot"))&&d(1500)})),d()}(),d=!1,f=document.querySelector(".header-main .wrapper"),m=document.querySelector(".top-menu"),v=function(){f.getBoundingClientRect().height<window.pageYOffset?m.setAttribute("style","position: fixed;"):m.removeAttribute("style","position")},(p=function(){document.documentElement.clientWidth<768?d||(window.addEventListener("scroll",v),d=!0):(d&&(window.removeEventListener("scroll",v),d=!1),m.removeAttribute("style","position"))})(),window.addEventListener("resize",p),n(document.querySelector('form[name="free-visit-form"]'),!0),n(document.querySelector('form[name="callback-form"]'),!0),n(document.querySelector('form[name="banner-form"]'),!1,document.querySelector("#thanks")),n(document.querySelector("#card_order"),!1,document.querySelector("#thanks"),(function(){document.getElementById("price-total").textContent="",l()})),n(document.querySelector("#footer_form"),!1,document.querySelector("#thanks")),document.getElementById("price-total")&&(a=document.querySelectorAll('#card_order input[name="club-name"]'),i=document.querySelectorAll("#card_order .time input"),c=document.querySelector('.price-message input[name="name"]'),a.forEach((function(e){return e.addEventListener("input",(function(){l()}))})),i.forEach((function(e){return e.addEventListener("input",(function(){l()}))})),c.addEventListener("input",(function(){l()})),l()),s=document.getElementById("totop"),document.querySelector("header.header-main").offsetHeight,(u=function(){return s.style.display=window.pageYOffset<document.querySelector("header.header-main").offsetHeight?"none":"block"})(),window.addEventListener("scroll",u)})();